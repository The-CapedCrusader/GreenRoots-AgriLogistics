<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>GreenRoots</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500&family=Jost:wght@500;600;700&display=swap" rel="stylesheet"> 

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
    <div class="container-xxl bg-white p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-grow text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Navbar & Hero Start -->
        <div class="container-xxl position-relative p-0">
            <nav class="navbar navbar-expand-lg navbar-light px-4 px-lg-5 py-3 py-lg-0">
                <a href="#" class="navbar-brand p-0 d-flex align-items-center">
                    <img src="img/leaf-design.png" alt="Leaf Design" style="width:50px; height:auto; margin-right:10px;">
                    <h1 class="m-0" style="font-size:24px;">GreenRoots</h1>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="fa fa-bars"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav mx-auto py-0">
                        <a href="index.html" class="nav-item nav-link">Home</a>
                        <a href="Tracking.html" class="nav-item nav-link active">Product Tracking</a>
                        <a href="VehicleTracking.html" class="nav-item nav-link">Vehicle Tracking</a>
                        <a href="weatherForecast.html" class="nav-item nav-link">Forecast</a>
                        <div class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
                            <div class="dropdown-menu m-0">
                                <a href="packaging.html" class="dropdown-item">Packaging</a>
                                <a href="workers.html" class="dropdown-item">workers</a>
                          
                            </div>
                        </div>
                        <a href="Grading.html" class="nav-item nav-link">Grading</a>
                    </div>
                    <a href="indexWithoutButtons.html" class="btn rounded-pill py-2 px-4 ms-3 d-none d-lg-block">Log out</a>
                </div>
            </nav>

            <div class="container-xxl py-5 bg-primary hero-header">
                <div class="container my-5 py-5 px-lg-5">
                    <div class="row g-5 py-5">
                        <div class="col-12 text-center">
                            <h1 class="text-white animated slideInDown">Packaging</h1>
                            <hr class="bg-white mx-auto mt-0" style="width: 90px;">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb justify-content-center">
                                    <li class="breadcrumb-item"><a class="text-white" href="#">Home</a></li>
                                    <li class="breadcrumb-item"><a class="text-white" href="#">Pages+</a></li>
                                   
                                    <li class="breadcrumb-item text-white active" aria-current="page">Packaging</li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Navbar & Hero End -->
        <!DOCTYPE html>
        <html lang="en">
        
        <head>
            <meta charset="utf-8">
            <title>GreenRoots</title>
            <meta content="width=device-width, initial-scale=1.0" name="viewport">
            <meta content="" name="keywords">
            <meta content="" name="description">
        
            <!-- Favicon -->
            <link href="img/favicon.ico" rel="icon">
        
            <!-- Google Web Fonts -->
            <link rel="preconnect" href="https://fonts.googleapis.com">
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
            <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500&family=Jost:wght@500;600;700&display=swap" rel="stylesheet"> 
        
            <!-- Icon Font Stylesheet -->
            <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
            <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
        
            <!-- Libraries Stylesheet -->
            <link href="lib/animate/animate.min.css" rel="stylesheet">
            <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
            <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">
        
            <!-- Customized Bootstrap Stylesheet -->
            <link href="css/bootstrap.min.css" rel="stylesheet">
        
            <!-- Template Stylesheet -->
            <link href="css/style.css" rel="stylesheet">
        </head>
        
        <body>
            <!-- Packaging Tracking Start -->
            <div class="container-xxl py-5">
                <div class="container px-lg-5">
                    <div class="row g-5 align-items-center">
                        <div class="col-lg-12 wow fadeInUp" data-wow-delay="0.1s">
                            <div class="section-title position-relative mb-4 pb-2">
                                <h2 class="position-relative text-primary ps-4">Product Packaging Status</h2>
                               
                            </div>
                            
                            <!-- Search Box -->
                            <div class="bg-light rounded p-4 mb-4">
                                <div class="input-group">
                                    <input type="text" class="form-control p-3" placeholder="Enter Package ID">
                                    <button class="btn btn-secondary px-4"><i class="bi bi-search"></i> Status</button>
                                </div>
                            </div>
                            <div class="bg-light rounded p-4 mb-4">
                                <div class="d-flex justify-content-end mb-3">
                                    <button class="btn btn-success me-2" data-bs-toggle="modal" data-bs-target="#addPackageModal">
                                        <i class="bi bi-plus-circle"></i> Add New Package
                                    </button>
                                    <button class="btn btn-primary me-2" id="refreshPackages">
                                        <i class="bi bi-arrow-clockwise"></i> Refresh List
                                    </button>
                                </div>
                            </div>
            
                            <!-- Product List -->
                            <div class="bg-light rounded p-4 mb-4">
                                <h4 class="mb-3">Recent Packages</h4>
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Package ID</th>
                                                <th>Product Type</th>
                                                <th>Pack Date</th>
                                                <th>Status</th>
                                                <th>Grade</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>#PKG001</td>
                                                <td>Fresh Vegetables</td>
                                                <td>2024-11-24</td>
                                                <td><span class="badge bg-primary">In Transit</span></td>
                                                <td><span class="badge bg-success">Grade A</span></td>
                                                <td>
                                                    <button class="btn btn-info btn-sm view-details">
                                                        <i class="bi bi-eye"></i> View
                                                    </button>
                                                    <button class="btn btn-primary btn-sm edit-package" data-bs-toggle="modal" data-bs-target="#editPackageModal">
                                                        <i class="bi bi-pencil"></i> Edit
                                                    </button>
                                                    <button class="btn btn-danger btn-sm delete-package">
                                                        <i class="bi bi-trash"></i> Delete
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
            
                            <!-- Tracking Info Cards -->
                            <div class="row g-4">
                                <!-- Package Details -->
                                <div id="packageDetails" class="col-md-4">
                                    <div class="bg-light rounded p-4">
                                        <h4 class="mb-3">Package Details</h4>
                                        <div class="mb-2 d-flex justify-content-between">
                                            <span>Package ID:</span>
                                            <span class="text-primary">#PKG001</span>
                                        </div>
                                        <div class="mb-2 d-flex justify-content-between">
                                            <span>Product Type:</span>
                                            <span>Fresh Vegetables</span>
                                        </div>
                                        <div class="mb-2 d-flex justify-content-between">
                                            <span>Quantity:</span>
                                            <span>500 kg</span>
                                        </div>
                                        <div class="mb-2 d-flex justify-content-between">
                                            <span>Pack Date:</span>
                                            <span>2024-11-24</span>
                                        </div>
                                    </div>
                                </div>
            
                                <!-- Quality Grade -->
                                <div id="qualityAssessment" class="col-md-4">
                                    <div class="bg-light rounded p-4">
                                        <h4 class="mb-3">Quality Assessment</h4>
                                        <div class="mb-2 d-flex justify-content-between">
                                            <span>Grade:</span>
                                            <span class="badge bg-success">Grade A</span>
                                        </div>
                                        <div class="mb-2 d-flex justify-content-between">
                                            <span>Inspector:</span>
                                            <span>Tanvir Mahmud</span>
                                        </div>
                                        <div class="mb-2 d-flex justify-content-between">
                                            <span>Inspection Date:</span>
                                            <span>2024-11-24</span>
                                        </div>
                                        <div class="mb-2 d-flex justify-content-between">
                                            <span>Quality Score:</span>
                                            <span>95/100</span>
                                        </div>
                                    </div>
                                </div>
            
                                <!-- Current Status -->
                                <div id="currentStatus" class="col-md-4">
                                    <div class="bg-light rounded p-4">
                                        <h4 class="mb-3">Current Status</h4>
                                        <div class="mb-2 d-flex justify-content-between">
                                            <span>Status:</span>
                                            <span class="badge bg-primary">In Transit</span>
                                        </div>
                                        <div class="mb-2 d-flex justify-content-between">
                                            <span>Location:</span>
                                            <span>Distribution Center</span>
                                        </div>
                                        <div class="mb-2 d-flex justify-content-between">
                                            <span>Next Stop:</span>
                                            <span>Retail Center</span>
                                        </div>
                                        <div class="mb-2 d-flex justify-content-between">
                                            <span>ETA:</span>
                                            <span>6 Hours</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
            
                            <!-- Tracking Timeline -->
                            <div class="bg-light rounded p-4 mt-4">
                                <h4 class="mb-4">Tracking Timeline</h4>
                                <div class="position-relative pb-5">
                                    <div class="timeline-item position-relative pb-3">
                                        <div class="timeline-date text-primary fw-bold">24 Nov 2024, 09:00 AM</div>
                                        <div class="timeline-content bg-white rounded p-3">
                                            <h5>Product Received</h5>
                                            <p class="mb-0">Product received at packaging facility</p>
                                        </div>
                                    </div>
                                    <div class="timeline-item position-relative pb-3">
                                        <div class="timeline-date text-primary fw-bold">24 Nov 2024, 10:30 AM</div>
                                        <div class="timeline-content bg-white rounded p-3">
                                            <h5>Quality Inspection Complete</h5>
                                            <p class="mb-0">Product passed quality inspection with Grade A</p>
                                        </div>
                                    </div>
                                    <div class="timeline-item position-relative">
                                        <div class="timeline-date text-primary fw-bold">24 Nov 2024, 11:45 AM</div>
                                        <div class="timeline-content bg-white rounded p-3">
                                            <h5>Packaging Complete</h5>
                                            <p class="mb-0">Product packaged and ready for shipment</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="editPackageModal" tabindex="-1" aria-labelledby="editPackageModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="editPackageModalLabel">Edit Package</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="editPackageForm">
                                <input type="hidden" id="editPackageId">
                                <div class="mb-3">
                                    <label for="editProductType" class="form-label">Product Type</label>
                                    <input type="text" class="form-control" id="editProductType" required>
                                </div>
                                <div class="mb-3">
                                    <label for="editQuantity" class="form-label">Quantity</label>
                                    <input type="text" class="form-control" id="editQuantity" required>
                                </div>
                                <div class="mb-3">
                                    <label for="editStatus" class="form-label">Status</label>
                                    <select class="form-select" id="editStatus" required>
                                        <option value="active">Active</option>
                                        <option value="low">Low Stock</option>
                                        <option value="inactive">Inactive</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="editGrade" class="form-label">Grade</label>
                                    <select class="form-select" id="editGrade" required>
                                        <option value="Grade A+">Grade A+</option>
                                        <option value="Grade A">Grade A</option>
                                        <option value="Grade B">Grade B</option>
                                        <option value="Pending">Pending</option>
                                    </select>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-primary" id="saveEditPackageBtn">Save Changes</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Add Delete Confirmation Modal -->
            <div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-labelledby="deleteConfirmModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="deleteConfirmModalLabel">Confirm Delete</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            Are you sure you want to delete this package? This action cannot be undone.
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
            
        <!-- Packaging Tracking End -->
        
        <!-- Custom CSS to be added to your existing style.css -->
        <style>
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 120px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #0B2154;
        }
        
        .timeline-item::after {
            content: '';
            position: absolute;
            left: 116px;
            top: 20px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #0B2154;
        }
        
        .timeline-content {
            margin-left: 150px;
            position: relative;
        }
        
        .timeline-date {
            position: absolute;
            left: 0;
            top: 20px;
            width: 100px;
        }
        </style>
        <!-- Add New Package Modal -->
<div class="modal fade" id="addPackageModal" tabindex="-1" aria-labelledby="addPackageModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addPackageModalLabel">Add New Package</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="addPackageForm">
                    <div class="mb-3">
                        <label for="packageId" class="form-label">Package ID</label>
                        <input type="text" class="form-control" id="packageId" required>
                    </div>
                    <div class="mb-3">
                        <label for="productType" class="form-label">Product Type</label>
                        <input type="text" class="form-control" id="productType" required>
                    </div>
                    <div class="mb-3">
                        <label for="quantity" class="form-label">Quantity</label>
                        <input type="text" class="form-control" id="quantity" required>
                    </div>
                    <div class="mb-3">
                        <label for="packDate" class="form-label">Pack Date</label>
                        <input type="date" class="form-control" id="packDate" required>
                    </div>
                    <div class="mb-3">
                        <label for="status" class="form-label">Status</label>
                        <select class="form-select" id="status" required>
                            <option value="Processing">Processing</option>
                            <option value="Quality Check">Quality Check</option>
                            <option value="Packaging">Packaging</option>
                            <option value="In Transit">In Transit</option>
                            <option value="Delivered">Delivered</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="grade" class="form-label">Grade</label>
                        <select class="form-select" id="grade" required>
                            <option value="Grade A+">Grade A+</option>
                            <option value="Grade A">Grade A</option>
                            <option value="Grade B">Grade B</option>
                            <option value="Pending">Pending</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-secondary" id="savePackageBtn">Save Package</button>
            </div>
        </div>
    </div>
</div>

<!-- Add Package Button -->
<button type="button" class="btn btn-success mt-3" data-bs-toggle="modal" data-bs-target="#addPackageModal">
    Add New Package
</button>
        
                <!-- Footer Start -->
                <div class="container-fluid bg-primary text-light footer wow fadeIn" data-wow-delay="0.1s">
                    <div class="container py-5 px-lg-5">
                        <div class="row g-5">
                            
                        </div>
                    </div>
                    <div class="container px-lg-5">
                        <div class="copyright">
                            <div class="row">
                                
                                
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Footer End -->
        
        
                <!-- Back to Top -->
                <a href="#" class="btn btn-lg btn-secondary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
            </div>
        
            <!-- JavaScript Libraries -->
            <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
            <script src="lib/wow/wow.min.js"></script>
            <script src="lib/easing/easing.min.js"></script>
            <script src="lib/waypoints/waypoints.min.js"></script>
            <script src="lib/counterup/counterup.min.js"></script>
            <script src="lib/owlcarousel/owl.carousel.min.js"></script>
            <script src="lib/isotope/isotope.pkgd.min.js"></script>
            <script src="lib/lightbox/js/lightbox.min.js"></script>
        
            <!-- Template Javascript -->
            <script src="js/main.js"></script>
            <!-- Add this right before the closing body tag, after all other script tags -->
<script>
    // Dummy package data
  // Dummy package data
  const dummyPackages = {
    'PKG001': {
        id: '#PKG001',
        productType: 'Fresh Vegetables',
        quantity: '500 kg',
        packDate: '2024-11-24',
        grade: 'Grade A',
        inspector: 'Tanvir Mahmud',
        inspectionDate: '2024-11-24',
        qualityScore: '95/100',
        status: 'In Transit',
        location: 'Distribution Center',
        nextStop: 'Retail Center',
        eta: '6 Hours',
        timeline: [
            {
                date: '24 Nov 2024, 09:00 AM',
                title: 'Product Received',
                description: 'Product received at packaging facility'
            },
            {
                date: '24 Nov 2024, 10:30 AM',
                title: 'Quality Inspection Complete',
                description: 'Product passed quality inspection with Grade A'
            },
            {
                date: '24 Nov 2024, 11:45 AM',
                title: 'Packaging Complete',
                description: 'Product packaged and ready for shipment'
            }
        ]
    },
    'PKG002': {
        id: '#PKG002',
        productType: 'Organic Fruits',
        quantity: '300 kg',
        packDate: '2024-11-24',
        grade: 'Grade A',
        inspector: 'Sarah Johnson',
        inspectionDate: '2024-11-24',
        qualityScore: '92/100',
        status: 'Delivered',
        location: 'Retail Center',
        nextStop: 'Completed',
        eta: '0 Hours',
        timeline: [
            {
                date: '24 Nov 2024, 08:00 AM',
                title: 'Product Received',
                description: 'Product received at packaging facility'
            },
            {
                date: '24 Nov 2024, 09:30 AM',
                title: 'Quality Inspection Complete',
                description: 'Product passed quality inspection with Grade A'
            },
            {
                date: '24 Nov 2024, 10:45 AM',
                title: 'Delivery Complete',
                description: 'Product delivered to retail center'
            }
        ]
    },
    'PKG003': {
        id: '#PKG003',
        productType: 'Grains',
        quantity: '1000 kg',
        packDate: '2024-11-23',
        grade: 'Pending',
        inspector: 'John Smith',
        inspectionDate: '2024-11-23',
        qualityScore: 'Pending',
        status: 'Processing',
        location: 'Quality Control',
        nextStop: 'Distribution Center',
        eta: '12 Hours',
        timeline: [
            {
                date: '23 Nov 2024, 02:00 PM',
                title: 'Product Received',
                description: 'Product received at packaging facility'
            },
            {
                date: '23 Nov 2024, 03:30 PM',
                title: 'Processing Started',
                description: 'Product entered quality control phase'
            }
        ]
    },
    'PKG004': {
        id: '#PKG004',
        productType: 'Organic Rice',
        quantity: '750 kg',
        packDate: '2024-11-24',
        grade: 'Grade B',
        inspector: 'Emily Chen',
        inspectionDate: '2024-11-24',
        qualityScore: '88/100',
        status: 'Quality Check',
        location: 'Processing Center',
        nextStop: 'Distribution Hub',
        eta: '24 Hours',
        timeline: [
            {
                date: '24 Nov 2024, 07:00 AM',
                title: 'Batch Received',
                description: 'Rice batch received for processing'
            },
            {
                date: '24 Nov 2024, 08:30 AM',
                title: 'Initial Screening',
                description: 'Moisture content and quality screening initiated'
            }
        ]
    },
    'PKG005': {
        id: '#PKG005',
        productType: 'Premium Spices',
        quantity: '200 kg',
        packDate: '2024-11-23',
        grade: 'Grade A+',
        inspector: 'David Wilson',
        inspectionDate: '2024-11-23',
        qualityScore: '98/100',
        status: 'Shipped',
        location: 'International Terminal',
        nextStop: 'Export Destination',
        eta: '48 Hours',
        timeline: [
            {
                date: '23 Nov 2024, 09:00 AM',
                title: 'Quality Check Complete',
                description: 'Premium grade verification completed'
            },
            {
                date: '23 Nov 2024, 02:00 PM',
                title: 'Export Documentation',
                description: 'International shipping documents processed'
            },
            {
                date: '24 Nov 2024, 06:00 AM',
                title: 'Shipment Dispatched',
                description: 'Package cleared for international shipping'
            }
        ]
    },
    'PKG006': {
        id: '#PKG006',
        productType: 'Fresh Herbs',
        quantity: '100 kg',
        packDate: '2024-11-24',
        grade: 'Grade A',
        inspector: 'Maria Rodriguez',
        inspectionDate: '2024-11-24',
        qualityScore: '94/100',
        status: 'Packaging',
        location: 'Packaging Facility',
        nextStop: 'Local Distribution',
        eta: '3 Hours',
        timeline: [
            {
                date: '24 Nov 2024, 10:00 AM',
                title: 'Harvest Received',
                description: 'Fresh herbs received from local farm'
            },
            {
                date: '24 Nov 2024, 11:30 AM',
                title: 'Quality Verification',
                description: 'Freshness and quality standards verified'
            }
        ]
    },
    'PKG007': {
        id: '#PKG007',
        productType: 'Organic Honey',
        quantity: '400 kg',
        packDate: '2024-11-23',
        grade: 'Premium',
        inspector: 'Alex Thompson',
        inspectionDate: '2024-11-23',
        qualityScore: '96/100',
        status: 'Ready for Pickup',
        location: 'Storage Facility',
        nextStop: 'Retail Distribution',
        eta: '2 Hours',
        timeline: [
            {
                date: '23 Nov 2024, 01:00 PM',
                title: 'Product Testing',
                description: 'Quality and purity testing completed'
            },
            {
                date: '23 Nov 2024, 03:30 PM',
                title: 'Packaging Complete',
                description: 'Product sealed in food-grade containers'
            },
            {
                date: '24 Nov 2024, 08:00 AM',
                title: 'Ready for Distribution',
                description: 'Package prepared for retail pickup'
            }
        ]
    },
    'PKG009': {
        id: '#PKG009',
        productType: 'Organic Honey',
        quantity: '400 kg',
        packDate: '2024-11-23',
        grade: 'Premium',
        inspector: 'Alex Thompson',
        inspectionDate: '2024-11-23',
        qualityScore: '96/100',
        status: 'Ready for Pickup',
        location: 'Storage Facility',
        nextStop: 'Retail Distribution',
        eta: '2 Hours',
        timeline: [
            {
                date: '23 Nov 2024, 01:00 PM',
                title: 'Product Testing',
                description: 'Quality and purity testing completed'
            },
            {
                date: '23 Nov 2024, 03:30 PM',
                title: 'Packaging Complete',
                description: 'Product sealed in food-grade containers'
            },
            {
                date: '24 Nov 2024, 08:00 AM',
                title: 'Ready for Distribution',
                description: 'Package prepared for retail pickup'
            }
        ]
    },
    'PKG008': {
        id: '#PKG008',
        productType: 'Premium Tea',
        quantity: '300 kg',
        packDate: '2024-11-24',
        grade: 'Grade A',
        inspector: 'Lisa Chang',
        inspectionDate: '2024-11-24',
        qualityScore: '93/100',
        status: 'Quality Testing',
        location: 'Lab Facility',
        nextStop: 'Packaging Center',
        eta: '8 Hours',
        timeline: [
            {
                date: '24 Nov 2024, 07:30 AM',
                title: 'Sample Collection',
                description: 'Batch samples collected for testing'
            },
            {
                date: '24 Nov 2024, 09:00 AM',
                title: 'Lab Analysis',
                description: 'Chemical composition analysis in progress'
            }
        ]
    }
};

$(document).ready(function() {
    const searchButton = $('.input-group .btn-secondary');
    const packageInput = $('.input-group .form-control');
    const packageList = $('.table-responsive');
    const detailsSection = $('.row.g-4');
    const timelineSection = $('.bg-light.rounded.p-4.mt-4');
    
    // Initially hide the details and timeline sections
    detailsSection.hide();
    timelineSection.hide();

    searchButton.on('click', function() {
        const packageId = packageInput.val().trim().toUpperCase().replace('#', '');
        
        if (!packageId) {
            alert('Please enter a Package ID');
            return;
        }

        const package = dummyPackages[packageId];
        if (package) {
            // Hide the package list
            packageList.hide();
            // Show and update the details sections
            detailsSection.show();
            timelineSection.show();
            updatePackageDetails(package);
            updateTimeline(package.timeline);
        } else {
            alert('Package not found. Try PKG001, PKG002, or PKG003');
        }
    });

    // Add a "View All Packages" button
    const viewAllButton = $('<button class="btn btn-primary mt-3">View All Packages</button>');
    detailsSection.after(viewAllButton);
    viewAllButton.hide();

    viewAllButton.on('click', function() {
        packageList.show();
        detailsSection.hide();
        timelineSection.hide();
        viewAllButton.hide();
        packageInput.val('');
    });

    // Show the "View All" button when viewing details
    searchButton.on('click', function() {
        if (packageInput.val().trim()) {
            viewAllButton.show();
        }
    });

    // Handle "View Details" buttons in the table
    $('.table .btn-secondary').on('click', function() {
        const packageId = $(this).closest('tr').find('td:first').text().replace('#', '');
        packageInput.val(packageId);
        searchButton.click();
    });

    function updatePackageDetails(package) {
        // Update Package Details section
        $('#packageDetails .text-primary').text(package.id);
        $('#packageDetails span:contains("Product Type:")').next().text(package.productType);
        $('#packageDetails span:contains("Quantity:")').next().text(package.quantity);
        $('#packageDetails span:contains("Pack Date:")').next().text(package.packDate);

        // Update Quality Assessment
        $('#qualityAssessment .badge').text(package.grade);
        $('#qualityAssessment span:contains("Inspector:")').next().text(package.inspector);
        $('#qualityAssessment span:contains("Inspection Date:")').next().text(package.inspectionDate);
        $('#qualityAssessment span:contains("Quality Score:")').next().text(package.qualityScore);

        // Update Current Status
        $('#currentStatus .badge').text(package.status);
        $('#currentStatus span:contains("Location:")').next().text(package.location);
        $('#currentStatus span:contains("Next Stop:")').next().text(package.nextStop);
        $('#currentStatus span:contains("ETA:")').next().text(package.eta);
    }

    function updateTimeline(timeline) {
        const timelineContainer = $('.position-relative.pb-5');
        let timelineHTML = '';
        
        timeline.forEach(event => {
            timelineHTML += `
                <div class="timeline-item position-relative pb-3">
                    <div class="timeline-date text-primary fw-bold">${event.date}</div>
                    <div class="timeline-content bg-white rounded p-3">
                        <h5>${event.title}</h5>
                        <p class="mb-0">${event.description}</p>
                    </div>
                </div>
            `;
        });
        
        timelineContainer.html(timelineHTML);
    }

    // Add keypress event for Enter key
    packageInput.on('keypress', function(e) {
        if (e.which === 13) {
            searchButton.click();
        }
    });
});
</script>
            
        </body>
        
        </html>



        <!-- Footer Start -->
        
        <!-- Footer End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-secondary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/isotope/isotope.pkgd.min.js"></script>
    <script src="lib/lightbox/js/lightbox.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    <script> 
        // Function to add a new package
function addNewPackage() {
    const packageId = $('#packageId').val().trim().toUpperCase().replace('#', '');
    const productType = $('#productType').val().trim();
    const quantity = $('#quantity').val().trim();
    const packDate = $('#packDate').val();
    const status = $('#status').val();
    const grade = $('#grade').val();

    // Basic validation
    if (!packageId || !productType || !quantity || !packDate) {
        alert('Please fill in all required fields');
        return;
    }

    // Create a new package object
    const newPackage = {
        id: `#${packageId}`,
        productType: productType,
        quantity: quantity,
        packDate: packDate,
        grade: grade,
        inspector: 'Not Assigned',
        inspectionDate: packDate,
        qualityScore: 'Pending',
        status: status,
        location: 'Packaging Facility',
        nextStop: 'Quality Control',
        eta: 'Pending',
        timeline: [
            {
                date: `${new Date(packDate).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}, 09:00 AM`,
                title: 'Package Created',
                description: 'New package added to the system'
            }
        ]
    };

    // Add the new package to the dummyPackages object
    dummyPackages[packageId] = newPackage;

    // Update the table with the new package
    const newRow = `
        <tr>
            <td>#${packageId}</td>
            <td>${productType}</td>
            <td>${packDate}</td>
            <td><span class="badge bg-warning">${status}</span></td>
            <td><span class="badge bg-warning">${grade}</span></td>
            <td><button class="btn btn-sm btn-secondary">View Details</button></td>
        </tr>
    `;
    $('.table-responsive tbody').append(newRow);

    // Close the modal
    $('#addPackageModal').modal('hide');

    // Clear the form
    $('#addPackageForm')[0].reset();

    // Rebind the view details buttons
    $('.table .btn-secondary').off('click').on('click', function() {
        const packageId = $(this).closest('tr').find('td:first').text().replace('#', '');
        packageInput.val(packageId);
        searchButton.click();
    });

    // Alert the user
    alert(`Package ${packageId} has been added successfully!`);
}
$(document).ready(function() {
    // Delete button handler
    $(document).on('click', '.delete-package', function(e) {
        e.preventDefault();
        const packageId = $(this).closest('tr').find('td:first').text().replace('#', '');
        
        if (confirm('Are you sure you want to delete this package?')) {
            $.ajax({
                url: 'delete_package.php',
                type: 'POST',
                data: { packageId: packageId },
                dataType: 'json',
                success: function(response) {
                    if (response.success) {
                        alert(response.message);
                        // Remove the row from the table
                        $(`tr:contains('${packageId}')`).remove();
                    } else {
                        alert('Error: ' + response.message);
                    }
                },
                error: function(xhr, status, error) {
                    alert('Error: ' + error);
                    console.error('Error:', error);
                }
            });
        }
    });

    // Edit button handler
    $(document).on('click', '.edit-package', function(e) {
        e.preventDefault();
        const row = $(this).closest('tr');
        const packageId = row.find('td:first').text().replace('#', '');
        const productType = row.find('td:eq(1)').text();
        const status = row.find('td:eq(3) .badge').text();
        const grade = row.find('td:eq(4) .badge').text();

        // Populate the edit modal
        $('#editPackageId').val(packageId);
        $('#editProductType').val(productType);
        $('#editStatus').val(status.toLowerCase());
        $('#editGrade').val(grade);
        
        // Show the modal
        $('#editPackageModal').modal('show');
    });

    // Save edit changes handler
    $('#saveEditPackageBtn').click(function(e) {
        e.preventDefault();
        const formData = {
            packageId: $('#editPackageId').val(),
            productType: $('#editProductType').val(),
            status: $('#editStatus').val(),
            grade: $('#editGrade').val()
        };

        $.ajax({
            url: 'update_package.php',
            type: 'POST',
            data: formData,
            dataType: 'json',
            success: function(response) {
                if (response.success) {
                    alert(response.message);
                    $('#editPackageModal').modal('hide');
                    // Reload the table or update the specific row
                    location.reload();
                } else {
                    alert('Error: ' + response.message);
                }
            },
            error: function(xhr, status, error) {
                alert('Error: ' + error);
                console.error('Error:', error);
            }
        });
    });

    // Add new package handler
    $('#savePackageBtn').click(function(e) {
        e.preventDefault();
        const formData = {
            packageId: $('#packageId').val(),
            productType: $('#productType').val(),
            quantity: $('#quantity').val(),
            packDate: $('#packDate').val(),
            status: $('#status').val(),
            grade: $('#grade').val()
        };

        $.ajax({
            url: 'create_package.php',
            type: 'POST',
            data: formData,
            dataType: 'json',
            success: function(response) {
                if (response.success) {
                    alert(response.message);
                    $('#addPackageModal').modal('hide');
                    // Reload the table
                    location.reload();
                } else {
                    alert('Error: ' + response.message);
                }
            },
            error: function(xhr, status, error) {
                alert('Error: ' + error);
                console.error('Error:', error);
            }
        });
    });

    // View details handler
    $(document).on('click', '.view-details', function(e) {
        e.preventDefault();
        const packageId = $(this).closest('tr').find('td:first').text().replace('#', '');
        
        // Use your existing package details display logic
        const package = dummyPackages[packageId];
        if (package) {
            $('.table-responsive').hide();
            $('.row.g-4').show();
            $('.bg-light.rounded.p-4.mt-4').show();
            updatePackageDetails(package);
            updateTimeline(package.timeline);
        }
    });

    // Function to refresh the package list
    function refreshPackageList() {
        $.ajax({
            url: 'get_packages.php',
            type: 'GET',
            dataType: 'json',
            success: function(response) {
                if (response.success) {
                    // Update the table with new data
                    updatePackageTable(response.data);
                } else {
                    alert('Error: ' + response.message);
                }
            },
            error: function(xhr, status, error) {
                alert('Error refreshing package list: ' + error);
                console.error('Error:', error);
            }
        });
    }

    // Refresh button handler
    $('#refreshPackages').click(function(e) {
        e.preventDefault();
        refreshPackageList();
    });
});

// Bind the save button to the add package function
$('#savePackageBtn').on('click', addNewPackage);
    </script>
    <script>
        $(document).ready(function() {
            // Refresh button handler
            $('#refreshPackages').click(function() {
                loadPackages();
            });
        
            // Edit button handler
            $(document).on('click', '.edit-package', function() {
                const row = $(this).closest('tr');
                const packageId = row.find('td:first').text();
                const productType = row.find('td:eq(1)').text();
                const status = row.find('.badge').text();
                const grade = row.find('td:eq(4)').text();
        
                $('#editPackageId').val(packageId);
                $('#editProductType').val(productType);
                $('#editStatus').val(status.toLowerCase());
                $('#editGrade').val(grade);
            });
        
            // Save edit changes handler
            $('#saveEditPackageBtn').click(function() {
                const formData = {
                    packageId: $('#editPackageId').val(),
                    productType: $('#editProductType').val(),
                    quantity: $('#editQuantity').val(),
                    status: $('#editStatus').val(),
                    grade: $('#editGrade').val()
                };
        
                $.ajax({
                    url: 'update_package.php',
                    type: 'POST',
                    data: formData,
                    success: function(response) {
                        const result = JSON.parse(response);
                        if (result.success) {
                            $('#editPackageModal').modal('hide');
                            loadPackages();
                            alert('Package updated successfully!');
                        } else {
                            alert('Error updating package: ' + result.message);
                        }
                    }
                });
            });
        
            // Delete button handler
            $(document).on('click', '.delete-package', function() {
                const packageId = $(this).closest('tr').find('td:first').text();
                $('#deleteConfirmModal').modal('show');
                $('#confirmDeleteBtn').data('packageId', packageId);
            });
        
            // Confirm delete handler
            $('#confirmDeleteBtn').click(function() {
                const packageId = $(this).data('packageId');
                $.ajax({
                    url: 'delete_package.php',
                    type: 'POST',
                    data: { packageId: packageId },
                    success: function(response) {
                        const result = JSON.parse(response);
                        if (result.success) {
                            $('#deleteConfirmModal').modal('hide');
                            loadPackages();
                            alert('Package deleted successfully!');
                        } else {
                            alert('Error deleting package: ' + result.message);
                        }
                    }
                });
            });
        });
        </script>
        <script>
            $(document).ready(function() {
                // Load packages from database
                function loadPackages() {
                    $.get('get_packages.php', function(response) {
                        const result = JSON.parse(response);
                        if (result.success) {
                            updatePackageTable(result.data);
                        } else {
                            alert('Error loading packages: ' + result.message);
                        }
                    });
                }
            
                function updatePackageTable(packages) {
                    const tbody = $('.table tbody');
                    tbody.empty();
                    
                    packages.forEach(package => {
                        tbody.append(`
                            <tr>
                                <td>${package.product_id}</td>
                                <td>${package.name}</td>
                                <td>${package.created_at}</td>
                                <td><span class="badge bg-${getStatusBadgeColor(package.status)}">${package.status}</span></td>
                                <td>${package.quantity}</td>
                                <td>
                                    <button class="btn btn-sm btn-secondary view-btn" data-id="${package.product_id}">View</button>
                                    <button class="btn btn-sm btn-primary edit-btn" data-id="${package.product_id}">Edit</button>
                                    <button class="btn btn-sm btn-danger delete-btn" data-id="${package.product_id}">Delete</button>
                                </td>
                            </tr>
                        `);
                    });
                }
            
                // Save new package
                $('#savePackageBtn').click(function() {
                    const formData = new FormData($('#addPackageForm')[0]);
                    
                    $.ajax({
                        url: 'create_package.php',
                        type: 'POST',
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function(response) {
                            const result = JSON.parse(response);
                            if (result.success) {
                                $('#addPackageModal').modal('hide');
                                loadPackages();
                                alert(result.message);
                            } else {
                                alert('Error: ' + result.message);
                            }
                        }
                    });
                });
            
                // Delete package
                $(document).on('click', '.delete-btn', function() {
                    if (confirm('Are you sure you want to delete this package?')) {
                        const packageId = $(this).data('id');
                        
                        $.ajax({
                            url: 'delete_package.php',
                            type: 'POST',
                            data: { packageId: packageId },
                            success: function(response) {
                                const result = JSON.parse(response);
                                if (result.success) {
                                    loadPackages();
                                    alert(result.message);
                                } else {
                                    alert('Error: ' + result.message);
                                }
                            }
                        });
                    }
                });
            
                // Helper function for status badge colors
                function getStatusBadgeColor(status) {
                    switch(status.toLowerCase()) {
                        case 'active': return 'success';
                        case 'low': return 'warning';
                        case 'inactive': return 'danger';
                        default: return 'secondary';
                    }
                }
            
                // Load packages when page loads
                loadPackages();
            });
            </script>
</body>

</html>